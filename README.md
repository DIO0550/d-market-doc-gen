# d-market-doc-gen

AIコーディングエージェントが実装するための仕様書・設計書を対話的に生成する Claude Code プラグイン。

全テンプレートは「AIエージェントが読んで実装する」ことに特化しており、人間向けの承認フロー・ステークホルダー管理・コミュニケーション計画は含まない。

## スキル一覧

| スキル | 説明 | テンプレート数 |
|:-------|:-----|:-------------|
| [spec-catalog](#spec-catalog) | 汎用仕様書カタログ。要件定義から運用まで幅広くカバー | 22 |
| [feature-spec](#feature-spec) | 機能単位の仕様書生成。ドメインごとに分割出力 | 5 |
| [api-spec](#api-spec) | API仕様書生成。Markdown / OpenAPI / GraphQL対応 | 3 |
| [system-design](#system-design) | システム設計書生成。ADR / C4モデル対応 | 3 |

## spec-catalog

22種類のテンプレートから最適な仕様書を対話的に生成する。

### A. 要件・プロダクト定義系

| ID | テンプレート | 用途 |
|:---|:-----------|:-----|
| A1 | AI PRD | AI/MLプロダクトのPRD。モデル要件・倫理・ガードレール・HITL設計 |
| A2 | SRS | IEEE 830/ISO 29148準拠。機能要件・非機能要件・制約・検証方法 |
| A3 | ユーザーストーリーマップ | ストーリー一覧 + GIVEN/WHEN/THEN受入基準 |
| A4 | プロダクトブリーフ | 1ページ概要。ビジョン・問題・解決策・成功指標 |

### B. 設計・アーキテクチャ系

| ID | テンプレート | 用途 |
|:---|:-----------|:-----|
| B1 | RFC | 技術提案書。問題→提案→代替案→トレードオフ |
| B2 | テクニカルデザインドキュメント | 詳細技術設計。データモデル・シーケンス図・API契約・エラー戦略 |
| B3 | Arc42 | 12セクション構成のアーキテクチャ文書 |
| B4 | SDD | IEEE 1016/ISO 42010準拠。設計ビューポイント・根拠・トレーサビリティ |
| B5 | 仕様探索ワークシート | AIとの対話で仕様を段階的に深掘り |
| B6 | 設計仕様書 | 設計判断・境界・振る舞い・エッジケースを網羅。解釈の余地がない精度の設計 |

### C. AI実装駆動系

| ID | テンプレート | 用途 |
|:---|:-----------|:-----|
| C1 | AI実装仕様書（フェーズ型） | フェーズ順の実装仕様。各フェーズに受入基準 |
| C2 | クイックスペック | 1ファイル完結。バグ修正・小機能追加・リファクタ用 |
| C3 | 実装計画 | 技術コンテキスト→フェーズ→アーティファクト |
| C4 | タスクリスト | 仕様/計画からタスク分解。依存順・並列可否・完了基準 |
| C5 | 実装仕様書 | 設計意図+コードレベル実装詳細。ファイル構成・関数シグネチャ・処理フロー・エラー処理 |

### D. 運用・品質系

| ID | テンプレート | 用途 |
|:---|:-----------|:-----|
| D1 | テスト計画 | テスト戦略・スコープ・テストケース・自動化方針 |
| D2 | マイグレーション計画 | 移行戦略・ステップ・ロールバック・データ検証 |
| D3 | デプロイメント計画 | リリース手順・環境・チェックリスト・ロールバック |
| D4 | ランブック | アラート対応・障害復旧・定期作業手順 |
| D5 | インシデント・ポストモーテム | 障害報告。タイムライン→根本原因→影響→対策 |
| D6 | SLO/エラーバジェット定義 | サービスレベル目標・エラーバジェット・バーンレート |

### E. プロジェクト基盤系

| ID | テンプレート | 用途 |
|:---|:-----------|:-----|
| E1 | プロジェクトコンテキスト | CLAUDE.md / AGENTS.md 形式。スタック・構造・ルール・ワークフロー |
| E2 | プロジェクト憲章 | プロジェクトの原則・技術基準・品質基準・変更禁止事項 |

## feature-spec

機能単位で仕様書を生成し、ドメインごとにファイルを分割して出力する。

| テンプレート | 用途 |
|:-----------|:-----|
| index | 機能の概要・背景・スコープ・全体フロー・仕様一覧 |
| frontend-spec | 画面構成・コンポーネント・フォーム・状態管理・レスポンシブ・アクセシビリティ |
| backend-spec | APIエンドポイント・ビジネスロジック・認証認可・バッチ処理・外部連携 |
| table-spec | テーブル定義・制約・インデックス・リレーション |
| PRD | プロダクト要件定義書 |

出力例:
```
docs/{feature-name}/
├── index.md
├── {domain-a}-spec.md    # フロントエンド仕様
├── {domain-b}-spec.md    # バックエンド仕様
└── {domain-c}-spec.md    # DB仕様
```

## api-spec

REST API / GraphQL の仕様書を複数フォーマットで生成する。

| フォーマット | 用途 |
|:-----------|:-----|
| Markdown | 人間が読めるAPI仕様書。シーケンス図付き |
| OpenAPI 3.1 | 機械可読なREST API定義。`$ref`によるスキーマ再利用 |
| GraphQL | SDL構文によるスキーマ定義。docstring付き |

## system-design

システム全体の設計ドキュメントを生成する。

| フォーマット | 用途 |
|:-----------|:-----|
| システム設計書 | アーキテクチャ・コンポーネント・データフロー・非機能要件 |
| ADR | 個別の設計判断を記録。代替案・トレードオフ・根拠 |
| C4モデル | Context → Container → Component → Code の階層ビュー |

## 共通ワークフロー

全スキル共通の対話フロー:

```
1. テンプレート選択（キーワード自動判定 or ユーザー選択）
   ↓
2. ヒアリング（バッチ質問で情報収集）
   ↓
3. テンプレートにヒアリング結果を反映して生成
   ↓
4. ファイル書き出し
```

## ディレクトリ構成

```
plugins/doc-gen-plugin/
└── skills/
    ├── spec-catalog/
    │   ├── SKILL.md
    │   ├── assets/templates/
    │   │   ├── requirements/     # A1-A4
    │   │   ├── design/           # B1-B6
    │   │   ├── implementation/   # C1-C5
    │   │   ├── operations/       # D1-D6
    │   │   └── foundation/       # E1-E2
    │   └── references/hearing-patterns.md
    ├── feature-spec/
    │   ├── SKILL.md
    │   ├── assets/templates/
    │   └── references/hearing-patterns.md
    ├── api-spec/
    │   ├── SKILL.md
    │   ├── assets/templates/
    │   └── references/hearing-patterns.md
    └── system-design/
        ├── SKILL.md
        ├── assets/templates/
        └── references/hearing-patterns.md
```

## ライセンス

MIT
