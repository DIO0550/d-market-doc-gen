# ヒアリングパターン - 機能仕様書 / PRD

## 機能仕様書のヒアリング

### バッチ 1: 基本情報

- 機能名は？
- どんな課題を解決する？（1〜2文）
- 対象ユーザーは？
- スコープは？（対象範囲 / 対象外）

### バッチ 2: 機能の全体像

- この機能の主な処理フローは？（入力 → 処理 → 出力）
- どのような画面やインターフェースがある？
- どのようなデータを扱う？（入力データ、保存データ、出力データ）
- 外部システムとの連携はある？

### バッチ 3: フロントエンド深掘り（画面がある場合）

- ページ構成と画面遷移は？
- 主要なユーザー操作は？
- フォームがある場合、フィールドとバリデーションルールは？
- レスポンシブ対応やアクセシビリティの要件は？

### バッチ 4: バックエンド深掘り（APIがある場合）

- APIエンドポイント（メソッド、パス、概要）は？
- 認証・認可の仕様は？
- バッチ処理や非同期処理はある？
- 外部サービスとの連携仕様は？
- キャッシュやレートリミットの要件は？

### バッチ 5: データベース深掘り（データ永続化がある場合）

- テーブル構造（主要カラム、型、制約）は？
- テーブル間のリレーションシップは？
- データのライフサイクル（作成・更新・削除）は？
- 既存テーブルからのマイグレーションはある？

### バッチ 6: 品質（未回答の場合のみ）

- エラーハンドリングの要件は？
- パフォーマンスの要件は？
- 技術スタックの制約は？

## PRDのヒアリング

### バッチ 1: 背景

- プロダクト / 機能名は？
- どんな課題を解決する？（可能なら定量的に）
- 対象ユーザーは？
- スコープは？（対象範囲 / 対象外）

### バッチ 2: プロダクト目標

- 成功の定義は？（指標 / KPI）
- ユーザーペルソナとその主要ニーズは？
- 競合状況や制約は？

### バッチ 3: ソリューションとスコープ

- 提案するソリューションの概要は？
- フェーズ分けやMVPの範囲は？
- リスクや未解決の質問は？
- タイムラインやリリース制約は？

## ドメイン分割のガイドライン

ヒアリング完了後、以下の基準でドメインを特定する:

1. **独立して読める単位**にする（1ファイルで1つの関心が完結）
2. **1ファイルが100〜300行**に収まるようにする
3. 各ドメインが**フロントエンド/バックエンド/テーブル**のどれに属するか判断し、対応するテンプレートを使う
4. ファイル名は `{domain}-spec.md` のケバブケースにする

### テンプレート選択の基準

| ドメインの内容 | テンプレート |
|:-------------|:-----------|
| 画面、UI、ユーザー操作、フォーム、状態管理、表示ロジック | `frontend-spec.md` |
| API、ビジネスロジック、認証、バッチ処理、外部連携、キャッシュ | `backend-spec.md` |
| テーブル設計、スキーマ、制約、インデックス、マイグレーション | `table-spec.md` |
| 上記に当てはまらないもの | 最も近いテンプレートを選び、セクションを自由に追加・削除 |
