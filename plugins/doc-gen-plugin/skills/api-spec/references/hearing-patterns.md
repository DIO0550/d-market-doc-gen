# ヒアリングパターン - API仕様書

## 共通（全フォーマット）

**バッチ 1: 基本情報**
- API名 / サービス名は？
- このAPIの目的は？
- 利用者は？（フロントエンド、モバイル、外部、他サービス）
- ベースURLまたはサービス境界は？

**バッチ 2: 認証と共通仕様**
- 認証方式は？（Bearer、APIキー、OAuth 2.0、なし）
- レスポンスフォーマットは？（JSON、XML）
- レートリミットの要件は？
- エラーハンドリングのパターンは？

## Markdown API のヒアリング

**バッチ 3: エンドポイント**
- このAPIが管理するリソース / エンティティは？
- リソースごとに必要な操作は？（一覧、取得、作成、更新、削除、カスタム）
- 一覧操作のクエリパラメータは？（フィルタリング、ソート、ページネーション）
- Webhookや非同期操作はある？

## OpenAPI のヒアリング

**バッチ 3: スキーマ詳細**
- 主要なリソーススキーマは？（フィールド、型、必須/任意）
- 操作ごとのリクエストボディスキーマは？
- ステータスコードごとのレスポンススキーマは？
- 再利用可能なコンポーネントはある？（共通ヘッダー、エラースキーマ、ページネーション）

**バッチ 4: 操作**
- 正確なエンドポイントパスとHTTPメソッドは？
- 各エンドポイントのパス/クエリパラメータは？
- 操作ごとのセキュリティスコープは？
- APIバージョニング戦略は？（URLパス、ヘッダー、クエリ）

## GraphQL のヒアリング

**バッチ 3: 型システム**
- 主要な型は？（フィールド、リレーション、NULL許可）
- Enum型は？
- ミューテーション用のInput型は？
- インターフェースやユニオン型はある？

**バッチ 4: 操作**
- 必要なクエリは？（引数、戻り値の型）
- 必要なミューテーションは？（入力、戻り値の型）
- サブスクリプションはある？（イベント、ペイロード）
- カスタムスカラーは？（Date、JSONなど）

## セクション適応ルール

- 認証なし → 認証セクションをスキップ
- ページネーションなし → ページネーションセクションをスキップ
- レートリミットなし → レートリミットセクションをスキップ
- Webhookなし → Webhookセクションをスキップ
- GraphQL: サブスクリプションなし → サブスクリプションセクションをスキップ
- OpenAPI: 単純なCRUD → リソーススキーマから自動生成
