# ヒアリングパターン - システム設計書

## システム設計書のヒアリング

**バッチ 1: 基本情報**
- システム名は？
- このシステムの目的は？（1〜2文）
- 目標と非目標は？
- ステークホルダーは？

**バッチ 2: アーキテクチャ**
- 主要なコンポーネントは？
- 連携する外部システムは？
- 技術スタックは？（または制約）
- データモデルは？

**バッチ 3: 非機能要件と運用**
- パフォーマンス目標は？（レイテンシ、スループット）
- 可用性目標は？（SLA）
- スケーラビリティ要件は？
- セキュリティ要件は？
- デプロイ戦略は？

## ADRのヒアリング

**バッチ 1: 背景**
- 記録すべき判断は何か？
- 背景・コンテキストは？（なぜこの判断が今必要か）
- 制約や考慮すべき力学は？

**バッチ 2: 選択肢**
- 検討した選択肢は？（最低2つ）
- 各選択肢のメリット・デメリットは？
- どの選択肢を選び、その理由は？
- この判断による影響は？

## C4モデルのヒアリング

**バッチ 1: システムコンテキスト（レベル1）**
- 設計対象のシステムは？
- ユーザー / アクターは？
- 連携する外部システムは？

**バッチ 2: コンテナ（レベル2）**
- 主要なコンテナは？（アプリ、サービス、データベース、メッセージキュー）
- 各コンテナの技術は？
- コンテナ間の通信方式は？（HTTP、gRPC、メッセージングなど）

**バッチ 3: コンポーネント（レベル3）- 必要な場合のみ**
- どのコンテナをコンポーネントに分解するか？
- そのコンテナ内の主要コンポーネントは？
- 各コンポーネントの責務とインターフェースは？

注: レベル4（コード）はC4モデル仕様書では通常ドキュメント化しない。レベル3は関連する場合のみ掘り下げる。

## セクション適応ルール

- シンプルなシステム → スケーラビリティ / インフラセクションをスキップ
- 外部連携なし → 外部APIセクションをスキップ
- ADR: 常に簡潔に。1ドキュメント1判断
- C4: 関連するレベルのみ生成（例: コンテキスト + コンテナのみ必要ならコンポーネントレベルはスキップ）
- データ永続化なし → データ移行セクションをスキップ
- 非同期処理なし → メッセージキュー / イベントセクションをスキップ
